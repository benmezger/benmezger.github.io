<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.74.3"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Developers use git to version control their source code. We all do, in fact, this blog is currently versioned by git. However, we not only use git to version control, but also to deploy applications. Usually we push new code to a remote server, where the server takes care of testing the code and then deploying the application. There are different ways of deploying an application, but this is one of them."><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="Finding exposed .git repositories"><meta property="og:description" content="Developers use git to version control their source code. We all do, in fact, this blog is currently versioned by git. However, we not only use git to version control, but also to deploy applications. Usually we push new code to a remote server, where the server takes care of testing the code and then deploying the application. There are different ways of deploying an application, but this is one of them."><meta property="og:type" content="article"><meta property="og:url" content="https://seds.nl/posts/finding-exposed-git-repositories/"><meta property="article:published_time" content="2017-10-30T00:00:00+00:00"><meta property="article:modified_time" content="2020-05-25T22:19:41-03:00"><title>Finding exposed .git repositories | Ben Mezger</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.2325c70fa3cade82423268ec11adc30170a335956bffb8083f42063b3d4efbbb.css integrity="sha256-IyXHD6PK3oJCMmjsEa3DAXCjNZVr/7gIP0IGOz1O+7s="><script defer src=/en.search.min.39be3ee1510035ce7c5a2da40acc47ee7b429d0f6f1015ca157e86bbfa809ccd.js integrity="sha256-Ob4+4VEANc58Wi2kCsxH7ntCnQ9vEBXKFX6Gu/qAnM0="></script><script defer src=/sw.min.74a8bb07f0bee86d6bb9a2750f073f14d93c7e4512f28860370cfd879e9719b4.js integrity="sha256-dKi7B/C+6G1ruaJ1Dwc/FNk8fkUS8ohgNwz9h56XGbQ="></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-138318350-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><link type=text/css rel=stylesheet href=/assets/css/orgmode.css><link type=text/css rel=stylesheet href=/assets/css/custom.css></head><body><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=/><span>Ben Mezger</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/books/>Books</a></li></ul><ul><li><a href=/posts>Blog</a></li><li><a href=/notes>Notes</a></li><li><strong>Social</strong><ul><li><a href=https://github.com/benmezger/>Github</a></li><li><a href=https://linkedin.com/in/benmezger>Linkedin</a></li><li><a href=https://twitter.com/sys%5Freboot>Twitter</a></li><li><a href=/index.xml>RSS</a></li></ul></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Finding exposed .git repositories</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><ul><li><a href=#how-to-find-exposed-git-repositories>How to find exposed git repositories</a></li><li><a href=#how-to-fix-this>How to fix this</a><ul><li><a href=#nginx>Nginx</a></li><li><a href=#apache>Apache</a></li></ul></li></ul></li></ul></nav></aside></header><article class=markdown><h1><a href=/posts/finding-exposed-git-repositories/>Finding exposed .git repositories</a></h1><h5>October 30, 2017</h5><div><a href=/categories/blog/>blog</a>,
<a href=/categories/web/>web</a></div><div><a href=/tags/git/>git</a>,
<a href=/tags/security/>security</a></div><p><p>Developers use <code>git</code> to version control their source code. We all do, in fact,
this blog is currently versioned by <code>git</code>. However, we not only use <code>git</code>
to version control, but also to deploy applications. Usually we push new code to
a remote server, where the server takes care of testing the code and then
deploying the application. There are different ways of deploying an application,
but this is one of them.</p><p>Some developers/sys-admins simply clone the respository to their server, then
simply point their web-server to that directory. Most of the VCS keep a hidden
directory at the root of the project. <code>git</code> keeps a <code>.git</code> directory at the root
of the repository, where all the information of that project is stored, such as
logs, versions, tags, configs, previous revisions and so on.</p><p>Not only some developers/sys-admins clone the repository in their server, but
they also point their web-server to that directory. <em>Not only that</em>, they also
sometimes change the source to set some configurations files with sensitive
informations (email/password, and so on).</p><p>If the web-server is pointing to the git repository and has directory listing
enabled, we could download the <code>.git</code> using <code>wget=/=curl</code> recursively, then
simply checkout a master and voilà.</p><p>For example, say <a href=https://seds.nl/.git>https://seds.nl/.git</a> exists, containing all the objects of this
blog, we could simply run <code>wget --mirror -I .git https://seds.nl/.git</code> to
download the repository.</p><h2 id=how-to-find-exposed-git-repositories>How to find exposed git repositories
<a class=anchor href=#how-to-find-exposed-git-repositories>#</a></h2><p>We can simply try out every URL we know by adding <code>/.git</code> at the end of the TLD.</p><p>Just kidding.</p><p>An easy way of finding websites which currently expose <code>.git</code> is using Google
D0rks. If you are not familiar with Google D0rks, it’s basically a few operators
Google offers you to filter out a few queries. <a href=http://www.googleguide.com/advanced%5Foperators%5Freference.html>Here</a> is a list of some of them.
The one we need is the <code>intext:</code> operator.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>intext:&#34;Index of /.git&#34;
</code></pre></div><p>This query makes use of the <code>intext</code> operator. It allows us to ask Google to
find all the pages that have a specific word in the body somewhere forcing
inclusion on the page (<a href=https://edu.google.com/coursebuilder/courses/pswg/1.2/assets/notes/Lesson3.5/Lesson3.5IntextandAdvancedSearch%5FText%5F.html>source</a>).</p><p>Let’s see.</p><figure><img src=/assets/imgs/google-intext-query_censored.jpg></figure><p>Holy sh1t. That’s ~89,900 results from Google. Can you imagine how much
sensitive information there must be?</p><h2 id=how-to-fix-this>How to fix this
<a class=anchor href=#how-to-fix-this>#</a></h2><p>Well, first of all, find a better way to getting your source code to a remote
server and simply pointing your web-server to that directory. If you don’t feel
like finding a better way, or just want to keep things simple, here is what you
need to do.</p><h3 id=nginx>Nginx
<a class=anchor href=#nginx>#</a></h3><p>Add the following telling Nginx to deny any request to a <code>.git</code> directory:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>  location ~ /.git/ {
      deny all;
  }
</code></pre></div><h3 id=apache>Apache
<a class=anchor href=#apache>#</a></h3><p>Add the following telling Apache to deny any request to a <code>.git</code> directory:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>  &lt;DirectoryMatch &#34;^/.*/\.git/&#34;&gt;
      Order deny,allow
      Deny from all
  &lt;/Directory&gt;
</code></pre></div><p>The only question that remains is: Is there anyway you could extract a <code>.git</code>
from a web-server that has directory listing disabled? I haven’t looked much
into it, but I wonder if there is anyway we could use <code>git</code> against itself.</p></p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/benmezger/blog/commit/9fd88bd50b85a54a5c12b0df17596ff823ebb1aa title="Last modified by Ben Mezger | May 26, 2020" target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>May 26, 2020</span></a></div><div><a class="flex align-center" href=https://github.com/benmezger/blog/edit/main/content/posts/finding-exposed-git-repositories.md target=_blank rel=noopener><img src=/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div></footer><div class=book-comments><script src=https://utteranc.es/client.js repo=benmezger/blog label=comment issue-term=pathname theme=github-dark crossorigin=anonymous async></script></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><nav id=TableOfContents><ul><li><ul><li><a href=#how-to-find-exposed-git-repositories>How to find exposed git repositories</a></li><li><a href=#how-to-fix-this>How to fix this</a><ul><li><a href=#nginx>Nginx</a></li><li><a href=#apache>Apache</a></li></ul></li></ul></li></ul></nav></aside></main></body></html>