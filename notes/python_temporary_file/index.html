<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="tags Python Programming  Python&rsquo;s tempfile standard library is pretty neat when we need to create a temporary file and/or directories. Instead of having a much of code like this:
import pathlib def create_file(filename): if pathlib.Path(filename).exists(): # handle path removal/rewrite/backup pass with open(filename, &#34;w&#34;) as f: # write to file pass We can ask Python to take care of handling this type of tasks for us. tempfile handles most of the OS API, so we can focus on writting the logic instead."><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="Python temporary file"><meta property="og:description" content="tags Python Programming  Python&rsquo;s tempfile standard library is pretty neat when we need to create a temporary file and/or directories. Instead of having a much of code like this:
import pathlib def create_file(filename): if pathlib.Path(filename).exists(): # handle path removal/rewrite/backup pass with open(filename, &#34;w&#34;) as f: # write to file pass We can ask Python to take care of handling this type of tasks for us. tempfile handles most of the OS API, so we can focus on writting the logic instead."><meta property="og:type" content="article"><meta property="og:url" content="https://seds.nl/notes/python_temporary_file/"><meta property="article:published_time" content="2020-08-02T16:44:00-03:00"><meta property="article:modified_time" content="2020-08-15T13:51:50-03:00"><title>Information Theory | Ben Mezger</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.d06c2941d6bb925f35bc6e968bc1590f01804052cae4ad5e9ad70d2906fac7a2.css integrity="sha256-0GwpQda7kl81vG6Wi8FZDwGAQFLK5K1emtcNKQb6x6I="><script defer src=/en.search.min.d4080429962cbd1d4d27dbfaec83700b4e7e2600e259bf02f1aa68f996ae275e.js integrity="sha256-1AgEKZYsvR1NJ9v67INwC05+JgDiWb8C8apo+ZauJ14="></script><script defer src=/sw.min.74a8bb07f0bee86d6bb9a2750f073f14d93c7e4512f28860370cfd879e9719b4.js integrity="sha256-dKi7B/C+6G1ruaJ1Dwc/FNk8fkUS8ohgNwz9h56XGbQ="></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-138318350-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><link type=text/css rel=stylesheet href=/assets/css/orgmode.css><link type=text/css rel=stylesheet href=/assets/css/custom.css></head><body><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=/><span>Ben Mezger</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/books/>Books</a></li></ul><ul><li><a href=/posts>Blog</a></li><li><a href=/notes>Notes</a></li><li><strong>Social</strong><ul><li><a href=https://github.com/benmezger/>Github</a></li><li><a href=https://twitter.com/sys%5Freboot>Twitter</a></li><li><a href=/index.xml>RSS</a></li></ul></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Python temporary file</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents></nav></aside></header><article class=markdown><h1><a href=/notes/python_temporary_file/>Python temporary file</a></h1><h5>August 2, 2020</h5><div><a href=/tags/python/>python</a>,
<a href=/tags/programming/>programming</a>,
<a href=/tags/libs/>libs</a></div><p><dl><dt>tags</dt><dd><a href=/notes/python/>Python</a> <a href=/notes/programming/>Programming</a></dd></dl><p>Python&rsquo;s <a href=https://docs.python.org/3/library/tempfile.html>tempfile</a> standard library is pretty neat when we need to create a
temporary file and/or directories. Instead of having a much of code like this:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#f92672>import</span> pathlib

<span style=color:#66d9ef>def</span> <span style=color:#a6e22e>create_file</span>(filename):
    <span style=color:#66d9ef>if</span> pathlib<span style=color:#f92672>.</span>Path(filename)<span style=color:#f92672>.</span>exists():
        <span style=color:#75715e># handle path removal/rewrite/backup</span>
        <span style=color:#66d9ef>pass</span>
    <span style=color:#66d9ef>with</span> open(filename, <span style=color:#e6db74>&#34;w&#34;</span>) <span style=color:#66d9ef>as</span> f:
        <span style=color:#75715e># write to file</span>
        <span style=color:#66d9ef>pass</span>

</code></pre></div><p>We can ask Python to take care of handling this type of tasks for us. <code>tempfile</code>
handles most of the OS API, so we can focus on writting the logic instead.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#f92672>import</span> tempfile

<span style=color:#66d9ef>def</span> <span style=color:#a6e22e>create_file</span>():
    <span style=color:#66d9ef>return</span> tempfile<span style=color:#f92672>.</span>NamedTemporaryFile(mode<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;w&#34;</span>, encoding<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;utf-8&#34;</span>)

<span style=color:#75715e># file one</span>
<span style=color:#66d9ef>print</span>(create_file())
<span style=color:#66d9ef>print</span>(create_file()<span style=color:#f92672>.</span>name)

<span style=color:#75715e># file two</span>
<span style=color:#66d9ef>print</span>(create_file())
<span style=color:#66d9ef>print</span>(create_file()<span style=color:#f92672>.</span>name)
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>&lt;tempfile._TemporaryFileWrapper object at 0x7f46864bb898&gt;
/tmp/tmpheedprs9
&lt;tempfile._TemporaryFileWrapper object at 0x7f46864bb898&gt;
/tmp/tmp7nol8aa4
</code></pre></div><p><a href=https://docs.python.org/3/library/tempfile.html#tempfile.NamedTemporaryFile>NamedTemporaryFile</a> returns a file-like object that can be used as a temporary
storage, however, contrary to <a href=https://docs.python.org/3/library/tempfile.html#tempfile.TemporaryFile>TemporaryFile</a>, a file created with
<code>NamedTemporaryFile</code> is guaranteed to have a visible name during its lifetime.
<code>TemporaryFile</code> gets destroyed as soon as the file is closed, <code>NamedTemporaryFile</code>
has support for the <code>delete</code> flags, which defaults to <code>True</code></p><p>You can also change the default filename prefix and suffix.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#f92672>import</span> tempfile

<span style=color:#66d9ef>def</span> <span style=color:#a6e22e>create_file</span>(suffix<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;.json&#34;</span>, prefix<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;tmpfile&#34;</span>):
    <span style=color:#66d9ef>return</span> tempfile<span style=color:#f92672>.</span>NamedTemporaryFile(
        mode<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;w&#34;</span>,
        encoding<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;utf-8&#34;</span>,
        suffix<span style=color:#f92672>=</span>suffix,
        prefix<span style=color:#f92672>=</span>prefix,
    )

<span style=color:#75715e># file one</span>

<span style=color:#66d9ef>print</span>(create_file(suffix<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;.csv&#34;</span>))
<span style=color:#66d9ef>print</span>(create_file(suffix<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;.csv&#34;</span>)<span style=color:#f92672>.</span>name)
<span style=color:#66d9ef>print</span>(create_file(suffix<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;.csv&#34;</span>, prefix<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;hello-world&#34;</span>)<span style=color:#f92672>.</span>name)
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>&lt;tempfile._TemporaryFileWrapper object at 0x7f1195ab69e8&gt;
/tmp/tmpfileuzad3kkp.csv
/tmp/hello-world4ahj1984.csv
</code></pre></div><p>With <code>TemporaryFile</code> it returns a <code>TextIOWrapper</code>:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#f92672>import</span> tempfile

<span style=color:#66d9ef>def</span> <span style=color:#a6e22e>create_file</span>(suffix<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;.json&#34;</span>, prefix<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;tmpfile&#34;</span>):
    <span style=color:#66d9ef>return</span> tempfile<span style=color:#f92672>.</span>TemporaryFile(
        mode<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;w&#34;</span>,
        encoding<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;utf-8&#34;</span>,
        suffix<span style=color:#f92672>=</span>suffix,
        prefix<span style=color:#f92672>=</span>prefix,
    )

<span style=color:#75715e># file one</span>
<span style=color:#66d9ef>print</span>(create_file(suffix<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;.csv&#34;</span>))
<span style=color:#66d9ef>print</span>(create_file(suffix<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;.csv&#34;</span>, prefix<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;hello-world&#34;</span>)<span style=color:#f92672>.</span>name)
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>&lt;_io.TextIOWrapper name=3 mode=&#39;w&#39; encoding=&#39;utf-8&#39;&gt;
3
</code></pre></div></p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/benmezger/blog/commit/757b76951594164621b3bbb98f09b50c49b44ce5 title="Last modified by Ben Mezger | August 15, 2020" target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>August 15, 2020</span></a></div><div><a class="flex align-center" href=https://github.com/benmezger/blog/edit/master/content/notes/2020-08-02--19-44-21Z--python_temporary_file.md target=_blank rel=noopener><img src=/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div></footer><div class=book-comments><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"benmezger"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><nav id=TableOfContents></nav></aside></main></body></html>